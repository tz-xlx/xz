{"remainingRequest":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\src\\components\\xmds\\Signed.vue?vue&type=style&index=0&id=df20e3d8&scoped=true&lang=css","dependencies":[{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\src\\components\\xmds\\Signed.vue","mtime":1575877524013},{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.d3{\n    padding:10px 20px;\n    color:#f00; \n    text-align: center;  \n}\n.d2{\n    display: block;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width:120px;\n    height:120px;\n    background: #3f80fe;\n    border-radius: 50%;\n    margin:15px auto;\n    border: 0;\n    outline: 0;\n    color:#fff;\n}\n.d2 p{\n    font-size: 20px;\n    margin-top: 0;\n}\n.d1{\n    display: flex;\n    align-items: center;\n    height:50px;\n    padding:5px 10px;\n}\n.d1 div{\n    background:#3f80fe;\n    border-radius: 50%;\n    color:#fff;\n    margin-right: 10px;\n    width:30px;\n    height:30px;\n    text-align: center;\n    padding-top: 5px;\n    box-sizing: border-box;\n}\n.location{\n    display: flex;\n    align-items: center;\n    height:50px;\n    font-size: 14px;\n    padding:5px 10px;\n    border-bottom: 1px solid #aaa;\n}\n.location img{\n    margin-right: 10px;\n}\n.title{\n    width:100%;\n    height:58px;\n    background:#3f80fe;\n    color:#fff;\n    text-align: center;\n    line-height: 58px;\n    font-size: 18px;\n    letter-spacing: 3px;\n    display: flex;\n}\n.title2{\n    width:100%;\n    height:58px;\n}\n.title button{\n    background: transparent;\n    border:0;\n    outline:0;\n    width:20%;\n}\n.title div{\n    width:22%;\n}\n.title img{\n    width:22px;\n}\n.user{\n    width:100%;\n    height:60px;\n    display: flex;\n    border-top:1px solid #aaa;\n    border-bottom:1px solid #aaa;\n    padding:5px 10px;\n    align-items: center;\n}\n.user div{\n    height:100%;\n}\n.user img{\n    height:80%;\n    border-radius: 50%;\n}\n.user span{\n    color:black\n}\n.info{\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    margin-left: 10px;\n}\n.info span:first-child{\n    font-size: 18px;\n    font-weight: 600;\n}\n.info span:last-child{\n    color:#666;\n}\n",{"version":3,"sources":["Signed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Signed.vue","sourceRoot":"src\\components\\xmds","sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <!-- 顶部标题 -->\r\n        <div class=\"title\">\r\n            <button @click=\"fh\">\r\n                <img src=\"http://127.0.0.1:3030/fh.png\">\r\n            </button>\r\n            <div></div>\r\n            <span>考勤打卡</span>\r\n        </div>\r\n        <div class=\"user\">\r\n                <img :src=\"img\" alt=\"\">\r\n            <div class=\"info\">\r\n                <span>{{user_name}}</span>\r\n                <span>{{department}}</span>\r\n            </div>\r\n        </div>\r\n        <!-- 定位信息 -->\r\n        <div class=\"location\">\r\n            <img src=\"http://127.0.0.1:3030/dw.png\" alt=\"\">\r\n            <span v-if=\"address3\">{{address2}}</span>\r\n            <span v-else>{{address1}}</span>\r\n        </div>\r\n        <!-- 地图 -->\r\n        <div id=\"map\"></div>\r\n        <!-- 上班打卡 -->\r\n        <div class=\"dk\">\r\n            <div class=\"d1\">\r\n                <div>上</div>\r\n                <span>上班时间 9:00</span>\r\n            </div>\r\n            <button class=\"d2\" @click=\"sbdk\" :disabled=\"!address3\">\r\n                <p>上班打卡</p>\r\n                <span>{{t}}</span>\r\n            </button>\r\n            <div class=\"d3\">\r\n                <span v-if=\"address3\">{{msg}}</span>\r\n            </div>\r\n            <div class=\"d1\">\r\n                <div>下</div>\r\n                <span>下班时间 18:00</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport AMap from 'AMap' // 引入高德地图\r\nexport default {\r\nmethods:{\r\n        //调用高德地图获取当前位置经纬度\r\n        getPosition(){\r\n        return new Promise((resolve,reject)=>{\r\n            var address,lat,lng;\r\n            var map = new AMap.Map('map', {\r\n            zoom:11,//级别\r\n            //center: [112.993614,28.168861],//中心点坐标\r\n            viewMode:'3D'//使用3D视图\r\n        });\r\n        AMap.plugin('AMap.Geolocation', function() {\r\n        var geolocation = new AMap.Geolocation({\r\n            // 是否使用高精度定位，默认：true\r\n            enableHighAccuracy: true,\r\n            // 设置定位超时时间，默认：无穷大\r\n            timeout: 10000,\r\n            // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\r\n            buttonOffset: new AMap.Pixel(10, 20),\r\n            //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\r\n            zoomToAccuracy: true,     \r\n            //  定位按钮的排放位置,  RB表示右下\r\n            buttonPosition: 'RB'\r\n        })\r\n        geolocation.getCurrentPosition()\r\n        AMap.event.addListener(geolocation, 'complete', onComplete)\r\n        AMap.event.addListener(geolocation, 'error', onError)\r\n        function onComplete(data){\r\n            // console.log(data)\r\n            address=data.formattedAddress\r\n            lat=data.position.lat\r\n            lng=data.position.lng\r\n            //计算两点间的距离  112.993614,28.168861\r\n            var p1=[112.99361,28.16886]\r\n            var p2=[lng,lat]\r\n            var dis = AMap.GeometryUtil.distance(p1, p2);\r\n            var obj={address,dis}\r\n            resolve(obj) \r\n        }\r\n        function onError (data) {\r\n            // 定位出错\r\n        }\r\n            })\r\n        })\r\n        },//此函数结束\r\n        //上班打卡\r\n        sbdk(){\r\n            var t1=new Date().getHours()\r\n            // console.log(t1)\r\n            if(t1>9){\r\n                this.$toast('已过上班打卡时间')\r\n                return\r\n            }\r\n            if(this.dis>500){\r\n                this.$toast('未到wifi考勤范围内,无法打卡')\r\n            }\r\n        },\r\n        //获取当前时间\r\n        getTime(){\r\n            var time=new Date().toLocaleTimeString('chinese',{hour12:false})\r\n                //console.log(time) \r\n                this.t=time;\r\n        },\r\n        //计算距离是否在打卡范围内 \r\n            getDistance(){\r\n                var dis=this.dis\r\n                if(dis<500){\r\n                    this.msg='已进入wifi考勤范围,请按时打卡'\r\n                    // console.log(this.msg)\r\n                }else{\r\n                    this.msg='还未进入考勤范围,无法打卡'\r\n                    // console.log(this.msg)\r\n                }\r\n        }, \r\n        fh(){\r\n            this.$router.go(-1)\r\n        },\r\n    },\r\n    data(){\r\n        return {\r\n            user_name:'',\r\n            department:'',\r\n            img:'',\r\n            address1:'定位中...',\r\n            address2:\"\",\r\n            address3:false,\r\n            msg:'已进入wifi考勤范围,请按时打卡',\r\n            dis:0,\r\n            t:''\r\n        }\r\n    },\r\n    watch:{\r\n        address(){\r\n            // console.log(2)\r\n        }\r\n    },\r\n    created(){\r\n        setInterval(()=>{\r\n            this.getTime();\r\n        },1000)\r\n        this.getTime();\r\n        this.axios.get('/me').then(res=>{\r\n            // console.log(res.data)\r\n            var data=res.data[0];\r\n            this.user_name=data.user_name;\r\n            this.department=data.department;\r\n            this.img=data.avatar;\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })  \r\n    },\r\n    mounted(){\r\n        this.getPosition().then(res=>{\r\n            console.log(res)\r\n            this.address2=res.address\r\n            this.dis=res.dis;\r\n            this.address3=true;\r\n            this.getDistance()\r\n        })   \r\n    }, \r\n}\r\n</script>\r\n<style scoped>\r\n    .d3{\r\n        padding:10px 20px;\r\n        color:#f00; \r\n        text-align: center;  \r\n    }\r\n    .d2{\r\n        display: block;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width:120px;\r\n        height:120px;\r\n        background: #3f80fe;\r\n        border-radius: 50%;\r\n        margin:15px auto;\r\n        border: 0;\r\n        outline: 0;\r\n        color:#fff;\r\n    }\r\n    .d2 p{\r\n        font-size: 20px;\r\n        margin-top: 0;\r\n    }\r\n    .d1{\r\n        display: flex;\r\n        align-items: center;\r\n        height:50px;\r\n        padding:5px 10px;\r\n    }\r\n    .d1 div{\r\n        background:#3f80fe;\r\n        border-radius: 50%;\r\n        color:#fff;\r\n        margin-right: 10px;\r\n        width:30px;\r\n        height:30px;\r\n        text-align: center;\r\n        padding-top: 5px;\r\n        box-sizing: border-box;\r\n    }\r\n    .location{\r\n        display: flex;\r\n        align-items: center;\r\n        height:50px;\r\n        font-size: 14px;\r\n        padding:5px 10px;\r\n        border-bottom: 1px solid #aaa;\r\n    }\r\n    .location img{\r\n        margin-right: 10px;\r\n    }\r\n    .title{\r\n        width:100%;\r\n        height:58px;\r\n        background:#3f80fe;\r\n        color:#fff;\r\n        text-align: center;\r\n        line-height: 58px;\r\n        font-size: 18px;\r\n        letter-spacing: 3px;\r\n        display: flex;\r\n    }\r\n    .title2{\r\n        width:100%;\r\n        height:58px;\r\n    }\r\n    .title button{\r\n        background: transparent;\r\n        border:0;\r\n        outline:0;\r\n        width:20%;\r\n    }\r\n    .title div{\r\n        width:22%;\r\n    }\r\n    .title img{\r\n        width:22px;\r\n    }\r\n    .user{\r\n        width:100%;\r\n        height:60px;\r\n        display: flex;\r\n        border-top:1px solid #aaa;\r\n        border-bottom:1px solid #aaa;\r\n        padding:5px 10px;\r\n        align-items: center;\r\n    }\r\n    .user div{\r\n        height:100%;\r\n    }\r\n    .user img{\r\n        height:80%;\r\n        border-radius: 50%;\r\n    }\r\n    .user span{\r\n        color:black\r\n    }\r\n    .info{\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n        margin-left: 10px;\r\n    }\r\n    .info span:first-child{\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n    }\r\n    .info span:last-child{\r\n        color:#666;\r\n    }\r\n</style>"]}]}