{"remainingRequest":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\src\\components\\xmds\\Signed.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\src\\components\\xmds\\Signed.vue","mtime":1575877524013},{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"D:\\xm\\xmdsai\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AMap from 'AMap'; // 引入高德地图\n\nexport default {\n  methods: {\n    //调用高德地图获取当前位置经纬度\n    getPosition: function getPosition() {\n      return new Promise(function (resolve, reject) {\n        var address, lat, lng;\n        var map = new AMap.Map('map', {\n          zoom: 11,\n          //级别\n          //center: [112.993614,28.168861],//中心点坐标\n          viewMode: '3D' //使用3D视图\n\n        });\n        AMap.plugin('AMap.Geolocation', function () {\n          var geolocation = new AMap.Geolocation({\n            // 是否使用高精度定位，默认：true\n            enableHighAccuracy: true,\n            // 设置定位超时时间，默认：无穷大\n            timeout: 10000,\n            // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\n            buttonOffset: new AMap.Pixel(10, 20),\n            //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\n            zoomToAccuracy: true,\n            //  定位按钮的排放位置,  RB表示右下\n            buttonPosition: 'RB'\n          });\n          geolocation.getCurrentPosition();\n          AMap.event.addListener(geolocation, 'complete', onComplete);\n          AMap.event.addListener(geolocation, 'error', onError);\n\n          function onComplete(data) {\n            // console.log(data)\n            address = data.formattedAddress;\n            lat = data.position.lat;\n            lng = data.position.lng; //计算两点间的距离  112.993614,28.168861\n\n            var p1 = [112.99361, 28.16886];\n            var p2 = [lng, lat];\n            var dis = AMap.GeometryUtil.distance(p1, p2);\n            var obj = {\n              address: address,\n              dis: dis\n            };\n            resolve(obj);\n          }\n\n          function onError(data) {// 定位出错\n          }\n        });\n      });\n    },\n    //此函数结束\n    //上班打卡\n    sbdk: function sbdk() {\n      var t1 = new Date().getHours(); // console.log(t1)\n\n      if (t1 > 9) {\n        this.$toast('已过上班打卡时间');\n        return;\n      }\n\n      if (this.dis > 500) {\n        this.$toast('未到wifi考勤范围内,无法打卡');\n      }\n    },\n    //获取当前时间\n    getTime: function getTime() {\n      var time = new Date().toLocaleTimeString('chinese', {\n        hour12: false\n      }); //console.log(time) \n\n      this.t = time;\n    },\n    //计算距离是否在打卡范围内 \n    getDistance: function getDistance() {\n      var dis = this.dis;\n\n      if (dis < 500) {\n        this.msg = '已进入wifi考勤范围,请按时打卡'; // console.log(this.msg)\n      } else {\n        this.msg = '还未进入考勤范围,无法打卡'; // console.log(this.msg)\n      }\n    },\n    fh: function fh() {\n      this.$router.go(-1);\n    }\n  },\n  data: function data() {\n    return {\n      user_name: '',\n      department: '',\n      img: '',\n      address1: '定位中...',\n      address2: \"\",\n      address3: false,\n      msg: '已进入wifi考勤范围,请按时打卡',\n      dis: 0,\n      t: ''\n    };\n  },\n  watch: {\n    address: function address() {// console.log(2)\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    setInterval(function () {\n      _this.getTime();\n    }, 1000);\n    this.getTime();\n    this.axios.get('/me').then(function (res) {\n      // console.log(res.data)\n      var data = res.data[0];\n      _this.user_name = data.user_name;\n      _this.department = data.department;\n      _this.img = data.avatar;\n    }).catch(function (err) {\n      console.log(err);\n    });\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.getPosition().then(function (res) {\n      console.log(res);\n      _this2.address2 = res.address;\n      _this2.dis = res.dis;\n      _this2.address3 = true;\n\n      _this2.getDistance();\n    });\n  }\n};",{"version":3,"sources":["Signed.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <!-- 顶部标题 -->\r\n        <div class=\"title\">\r\n            <button @click=\"fh\">\r\n                <img src=\"http://127.0.0.1:3030/fh.png\">\r\n            </button>\r\n            <div></div>\r\n            <span>考勤打卡</span>\r\n        </div>\r\n        <div class=\"user\">\r\n                <img :src=\"img\" alt=\"\">\r\n            <div class=\"info\">\r\n                <span>{{user_name}}</span>\r\n                <span>{{department}}</span>\r\n            </div>\r\n        </div>\r\n        <!-- 定位信息 -->\r\n        <div class=\"location\">\r\n            <img src=\"http://127.0.0.1:3030/dw.png\" alt=\"\">\r\n            <span v-if=\"address3\">{{address2}}</span>\r\n            <span v-else>{{address1}}</span>\r\n        </div>\r\n        <!-- 地图 -->\r\n        <div id=\"map\"></div>\r\n        <!-- 上班打卡 -->\r\n        <div class=\"dk\">\r\n            <div class=\"d1\">\r\n                <div>上</div>\r\n                <span>上班时间 9:00</span>\r\n            </div>\r\n            <button class=\"d2\" @click=\"sbdk\" :disabled=\"!address3\">\r\n                <p>上班打卡</p>\r\n                <span>{{t}}</span>\r\n            </button>\r\n            <div class=\"d3\">\r\n                <span v-if=\"address3\">{{msg}}</span>\r\n            </div>\r\n            <div class=\"d1\">\r\n                <div>下</div>\r\n                <span>下班时间 18:00</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport AMap from 'AMap' // 引入高德地图\r\nexport default {\r\nmethods:{\r\n        //调用高德地图获取当前位置经纬度\r\n        getPosition(){\r\n        return new Promise((resolve,reject)=>{\r\n            var address,lat,lng;\r\n            var map = new AMap.Map('map', {\r\n            zoom:11,//级别\r\n            //center: [112.993614,28.168861],//中心点坐标\r\n            viewMode:'3D'//使用3D视图\r\n        });\r\n        AMap.plugin('AMap.Geolocation', function() {\r\n        var geolocation = new AMap.Geolocation({\r\n            // 是否使用高精度定位，默认：true\r\n            enableHighAccuracy: true,\r\n            // 设置定位超时时间，默认：无穷大\r\n            timeout: 10000,\r\n            // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\r\n            buttonOffset: new AMap.Pixel(10, 20),\r\n            //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\r\n            zoomToAccuracy: true,     \r\n            //  定位按钮的排放位置,  RB表示右下\r\n            buttonPosition: 'RB'\r\n        })\r\n        geolocation.getCurrentPosition()\r\n        AMap.event.addListener(geolocation, 'complete', onComplete)\r\n        AMap.event.addListener(geolocation, 'error', onError)\r\n        function onComplete(data){\r\n            // console.log(data)\r\n            address=data.formattedAddress\r\n            lat=data.position.lat\r\n            lng=data.position.lng\r\n            //计算两点间的距离  112.993614,28.168861\r\n            var p1=[112.99361,28.16886]\r\n            var p2=[lng,lat]\r\n            var dis = AMap.GeometryUtil.distance(p1, p2);\r\n            var obj={address,dis}\r\n            resolve(obj) \r\n        }\r\n        function onError (data) {\r\n            // 定位出错\r\n        }\r\n            })\r\n        })\r\n        },//此函数结束\r\n        //上班打卡\r\n        sbdk(){\r\n            var t1=new Date().getHours()\r\n            // console.log(t1)\r\n            if(t1>9){\r\n                this.$toast('已过上班打卡时间')\r\n                return\r\n            }\r\n            if(this.dis>500){\r\n                this.$toast('未到wifi考勤范围内,无法打卡')\r\n            }\r\n        },\r\n        //获取当前时间\r\n        getTime(){\r\n            var time=new Date().toLocaleTimeString('chinese',{hour12:false})\r\n                //console.log(time) \r\n                this.t=time;\r\n        },\r\n        //计算距离是否在打卡范围内 \r\n            getDistance(){\r\n                var dis=this.dis\r\n                if(dis<500){\r\n                    this.msg='已进入wifi考勤范围,请按时打卡'\r\n                    // console.log(this.msg)\r\n                }else{\r\n                    this.msg='还未进入考勤范围,无法打卡'\r\n                    // console.log(this.msg)\r\n                }\r\n        }, \r\n        fh(){\r\n            this.$router.go(-1)\r\n        },\r\n    },\r\n    data(){\r\n        return {\r\n            user_name:'',\r\n            department:'',\r\n            img:'',\r\n            address1:'定位中...',\r\n            address2:\"\",\r\n            address3:false,\r\n            msg:'已进入wifi考勤范围,请按时打卡',\r\n            dis:0,\r\n            t:''\r\n        }\r\n    },\r\n    watch:{\r\n        address(){\r\n            // console.log(2)\r\n        }\r\n    },\r\n    created(){\r\n        setInterval(()=>{\r\n            this.getTime();\r\n        },1000)\r\n        this.getTime();\r\n        this.axios.get('/me').then(res=>{\r\n            // console.log(res.data)\r\n            var data=res.data[0];\r\n            this.user_name=data.user_name;\r\n            this.department=data.department;\r\n            this.img=data.avatar;\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })  \r\n    },\r\n    mounted(){\r\n        this.getPosition().then(res=>{\r\n            console.log(res)\r\n            this.address2=res.address\r\n            this.dis=res.dis;\r\n            this.address3=true;\r\n            this.getDistance()\r\n        })   \r\n    }, \r\n}\r\n</script>\r\n<style scoped>\r\n    .d3{\r\n        padding:10px 20px;\r\n        color:#f00; \r\n        text-align: center;  \r\n    }\r\n    .d2{\r\n        display: block;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width:120px;\r\n        height:120px;\r\n        background: #3f80fe;\r\n        border-radius: 50%;\r\n        margin:15px auto;\r\n        border: 0;\r\n        outline: 0;\r\n        color:#fff;\r\n    }\r\n    .d2 p{\r\n        font-size: 20px;\r\n        margin-top: 0;\r\n    }\r\n    .d1{\r\n        display: flex;\r\n        align-items: center;\r\n        height:50px;\r\n        padding:5px 10px;\r\n    }\r\n    .d1 div{\r\n        background:#3f80fe;\r\n        border-radius: 50%;\r\n        color:#fff;\r\n        margin-right: 10px;\r\n        width:30px;\r\n        height:30px;\r\n        text-align: center;\r\n        padding-top: 5px;\r\n        box-sizing: border-box;\r\n    }\r\n    .location{\r\n        display: flex;\r\n        align-items: center;\r\n        height:50px;\r\n        font-size: 14px;\r\n        padding:5px 10px;\r\n        border-bottom: 1px solid #aaa;\r\n    }\r\n    .location img{\r\n        margin-right: 10px;\r\n    }\r\n    .title{\r\n        width:100%;\r\n        height:58px;\r\n        background:#3f80fe;\r\n        color:#fff;\r\n        text-align: center;\r\n        line-height: 58px;\r\n        font-size: 18px;\r\n        letter-spacing: 3px;\r\n        display: flex;\r\n    }\r\n    .title2{\r\n        width:100%;\r\n        height:58px;\r\n    }\r\n    .title button{\r\n        background: transparent;\r\n        border:0;\r\n        outline:0;\r\n        width:20%;\r\n    }\r\n    .title div{\r\n        width:22%;\r\n    }\r\n    .title img{\r\n        width:22px;\r\n    }\r\n    .user{\r\n        width:100%;\r\n        height:60px;\r\n        display: flex;\r\n        border-top:1px solid #aaa;\r\n        border-bottom:1px solid #aaa;\r\n        padding:5px 10px;\r\n        align-items: center;\r\n    }\r\n    .user div{\r\n        height:100%;\r\n    }\r\n    .user img{\r\n        height:80%;\r\n        border-radius: 50%;\r\n    }\r\n    .user span{\r\n        color:black\r\n    }\r\n    .info{\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n        margin-left: 10px;\r\n    }\r\n    .info span:first-child{\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n    }\r\n    .info span:last-child{\r\n        color:#666;\r\n    }\r\n</style>"],"sourceRoot":"src\\components\\xmds"}]}